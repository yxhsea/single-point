<!DOCTYPE html>
<html>
<head>
    <title>SSO 客户端信息管理</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
    <script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
</head>
<body>

<div id="app" class="container" style="margin-top: 20px">
        <h2 style="text-align: center">SSO 客户端信息管理</h2>
    <div style="height: 35px;">
        <span style="float: left">
            <span> 欢迎 Admin 登录</span>
        </span>
        <span style="float: right">
            <a href="/index/add"><button type="button" class="btn btn-outline-success btn-sm">新增</button></a>
            <button type="button" class="btn btn-danger btn-sm" v-on:click="logout">注销</button>
        </span>
    </div>
    <table class="table table-bordered" style="text-align: center">
        <thead>
        <tr>
            <th>系统名称</th>
            <th>ClientId</th>
            <th>ClientSecret</th>
            <th>创建时间</th>
            <th>更新时间</th>
            <th>状态</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        <tr v-for="value in lists">
            <td>{{ value.name }}</td>
            <td>{{ value.client_id }}</td>
            <td>{{ value.client_secret }}</td>
            <td>{{ value.created_at }}</td>
            <td>{{ value.updated_at }}</td>
            <td>
                <span v-if="value.status" style="color: green">
                    启用
                </span>
                <span v-else style="color: red">
                    禁用
                </span>
            </td>
            <td>
                <a :href="'/index/detail?id=' + value.id"><button type="button" class="btn btn-outline-success btn-sm">查看</button></a>
                <a :href="'/index/edit?id=' + value.id"><button type="button" class="btn btn-outline-primary btn-sm">编辑</button></a>
                <!--<button type="button" class="btn btn-outline-danger btn-sm">删除</button>-->
            </td>
        </tr>
        </tbody>
    </table>
</div>

</body>
<script>
    new Vue({
            el: '#app',
            data: {
                lists: []
            },
            mounted:function () {
                this.getList();
            },
            methods: {
                getList() {
                    // 发送get请求
                    this.$http.get('/api/list').then(function(res){
                        this.lists = res.body.data;
                    },function(){
                        console.log('请求失败处理');
                    });
                },
                logout() {
                    // 发送get请求
                    this.$http.get('/auth/logout').then(function(res){
                        location.href = '/auth/show';
                    },function(){
                        console.log('请求失败处理');
                    });
                }
            }
        });
</script>
</html>